var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))__hasOwnProp.call(t,n)&&__defNormalProp(e,n,t[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))__propIsEnum.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));function getMarkNames(e,t){let n=`${e.toString()}-${t.toString()}`;return{measure:n,start:n+"-start",stop:n+"-stop"}}function startMeasurement(e,t){let n=getMarkNames(e,t);performance.mark(n.start)}function endMeasurement(e,t){let n=getMarkNames(e,t);performance.getEntriesByName(n.start)&&(performance.measure(n.measure,n.start),performance.getEntriesByName(n.measure).forEach((e=>console.log(`${e.name}: ${e.duration} ms`))),performance.clearMarks(n.start),performance.clearMeasures(n.measure))}class ServerWorkerStub{constructor(e){this.dispatcher=e,this.requestHandlers={}}registerHandler(e,t){if(e in this.requestHandlers)throw`ServerWorkerStub: Handler already registered for '${e}'`;this.requestHandlers[e]=t}receive(e){if(e.name in this.requestHandlers){startMeasurement("ServerWorkerStub",e.id);let t=t=>this.dispatcher({id:e.id,name:"progress",data:t});this.requestHandlers[e.name](e.data,t).then((t=>this.dispatcher({id:e.id,name:"payload",data:t}))).then((()=>endMeasurement("ServerWorkerStub",e.id))).catch((t=>this.dispatcher({id:e.id,name:"error",data:t})))}else this.dispatcher({id:e.id,name:"error",data:"Unknown worker message"})}}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var sqlWasm={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze({__proto__:null,default:__viteBrowserExternal}),require$$2=getAugmentedNamespace(__viteBrowserExternal$1),module,initSqlJsPromise,initSqlJs2;module=sqlWasm,initSqlJsPromise=void 0,initSqlJs2=function(e){return initSqlJsPromise||(initSqlJsPromise=new Promise((function(t,n){var r,a=void 0!==e?e:{},i=a.onAbort;a.onAbort=function(e){n(new Error(e)),i&&i(e)},a.postRun=a.postRun||[],a.postRun.push((function(){t(a)})),module=void 0,r||(r=void 0!==a?a:{}),r.onRuntimeInitialized=function(){function e(e,t){this.Ra=e,this.db=t,this.Qa=1,this.lb=[]}function t(e,t){if(this.db=t,t=Q(e)+1,this.eb=Pt(t),null===this.eb)throw Error("Unable to allocate memory for the SQL string");G(e,x,this.eb,t),this.jb=this.eb,this.$a=this.pb=null}function n(e){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=e){var t=this.filename,n=t?pe("//"+t):"/";if(n=Xe(n,4095&(void 0!==(t=pt(!0,!0))?t:438)|32768,0),e){if("string"==typeof e){for(var r=Array(e.length),i=0,s=e.length;i<s;++i)r[i]=e.charCodeAt(i);e=r}at(n,146|t),ft(r=st(n,"w"),e,0,e.length,0,void 0),ut(r),at(n,t)}}this.handleError(o(this.filename,a)),this.db=$(a,"i32"),ae(this.db),this.fb={},this.Xa={}}var a=Wt(4),i=r.cwrap,o=i("sqlite3_open","number",["string","number"]),s=i("sqlite3_close_v2","number",["number"]),u=i("sqlite3_exec","number",["number","string","number","number","number"]),c=i("sqlite3_changes","number",["number"]),l=i("sqlite3_prepare_v2","number",["number","string","number","number","number"]),f=i("sqlite3_sql","string",["number"]),d=i("sqlite3_normalized_sql","string",["number"]),p=i("sqlite3_prepare_v2","number",["number","number","number","number","number"]),h=i("sqlite3_bind_text","number",["number","number","number","number","number"]),m=i("sqlite3_bind_blob","number",["number","number","number","number","number"]),b=i("sqlite3_bind_double","number",["number","number","number"]),y=i("sqlite3_bind_int","number",["number","number","number"]),w=i("sqlite3_bind_parameter_index","number",["number","string"]),v=i("sqlite3_step","number",["number"]),g=i("sqlite3_errmsg","string",["number"]),R=i("sqlite3_column_count","number",["number"]),M=i("sqlite3_data_count","number",["number"]),N=i("sqlite3_column_double","number",["number","number"]),S=i("sqlite3_column_text","string",["number","number"]),A=i("sqlite3_column_blob","number",["number","number"]),D=i("sqlite3_column_bytes","number",["number","number"]),L=i("sqlite3_column_type","number",["number","number"]),j=i("sqlite3_column_name","string",["number","number"]),U=i("sqlite3_reset","number",["number"]),C=i("sqlite3_clear_bindings","number",["number"]),F=i("sqlite3_finalize","number",["number"]),z=i("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),V=i("sqlite3_value_type","number",["number"]),H=i("sqlite3_value_bytes","number",["number"]),Y=i("sqlite3_value_text","string",["number"]),X=i("sqlite3_value_blob","number",["number"]),J=i("sqlite3_value_double","number",["number"]),K=i("sqlite3_result_double","",["number","number"]),Z=i("sqlite3_result_null","",["number"]),ee=i("sqlite3_result_text","",["number","string","number","number"]),te=i("sqlite3_result_blob","",["number","number","number","number"]),ne=i("sqlite3_result_int","",["number","number"]),re=i("sqlite3_result_error","",["number","string","number"]),ae=i("RegisterExtensionFunctions","number",["number"]);e.prototype.bind=function(e){if(!this.Ra)throw"Statement closed";return this.reset(),Array.isArray(e)?this.Bb(e):null==e||"object"!=typeof e||this.Cb(e)},e.prototype.step=function(){if(!this.Ra)throw"Statement closed";this.Qa=1;var e=v(this.Ra);switch(e){case 100:return!0;case 101:return!1;default:throw this.db.handleError(e)}},e.prototype.Ib=function(e){return null==e&&(e=this.Qa,this.Qa+=1),N(this.Ra,e)},e.prototype.Jb=function(e){return null==e&&(e=this.Qa,this.Qa+=1),S(this.Ra,e)},e.prototype.getBlob=function(e){null==e&&(e=this.Qa,this.Qa+=1);var t=D(this.Ra,e);e=A(this.Ra,e);for(var n=new Uint8Array(t),r=0;r<t;r+=1)n[r]=P[e+r];return n},e.prototype.get=function(e){null!=e&&this.bind(e)&&this.step(),e=[];for(var t=M(this.Ra),n=0;n<t;n+=1)switch(L(this.Ra,n)){case 1:case 2:e.push(this.Ib(n));break;case 3:e.push(this.Jb(n));break;case 4:e.push(this.getBlob(n));break;default:e.push(null)}return e},e.prototype.getColumnNames=function(){for(var e=[],t=R(this.Ra),n=0;n<t;n+=1)e.push(j(this.Ra,n));return e},e.prototype.getAsObject=function(e){e=this.get(e);for(var t=this.getColumnNames(),n={},r=0;r<t.length;r+=1)n[t[r]]=e[r];return n},e.prototype.getSQL=function(){return f(this.Ra)},e.prototype.getNormalizedSQL=function(){return d(this.Ra)},e.prototype.run=function(e){return null!=e&&this.bind(e),this.step(),this.reset()},e.prototype.Fb=function(e,t){null==t&&(t=this.Qa,this.Qa+=1);var n=O(e=Nt(e));this.lb.push(n),this.db.handleError(h(this.Ra,t,n,e.length-1,0))},e.prototype.Ab=function(e,t){null==t&&(t=this.Qa,this.Qa+=1);var n=O(e);this.lb.push(n),this.db.handleError(m(this.Ra,t,n,e.length,0))},e.prototype.Eb=function(e,t){null==t&&(t=this.Qa,this.Qa+=1),this.db.handleError((e===(0|e)?y:b)(this.Ra,t,e))},e.prototype.Db=function(e){null==e&&(e=this.Qa,this.Qa+=1),m(this.Ra,e,0,0,0)},e.prototype.tb=function(e,t){switch(null==t&&(t=this.Qa,this.Qa+=1),typeof e){case"string":return void this.Fb(e,t);case"number":case"boolean":return void this.Eb(e+0,t);case"object":if(null===e)return void this.Db(t);if(null!=e.length)return void this.Ab(e,t)}throw"Wrong API use : tried to bind a value of an unknown type ("+e+")."},e.prototype.Cb=function(e){var t=this;return Object.keys(e).forEach((function(n){var r=w(t.Ra,n);0!==r&&t.tb(e[n],r)})),!0},e.prototype.Bb=function(e){for(var t=0;t<e.length;t+=1)this.tb(e[t],t+1);return!0},e.prototype.reset=function(){return 0===C(this.Ra)&&0===U(this.Ra)},e.prototype.freemem=function(){for(var e;void 0!==(e=this.lb.pop());)xt(e)},e.prototype.free=function(){var e=0===F(this.Ra);return delete this.db.fb[this.Ra],this.Ra=0,e},t.prototype.next=function(){if(null===this.eb)return{done:!0};if(null!==this.$a&&(this.$a.free(),this.$a=null),!this.db.db)throw this.nb(),Error("Database closed");var t=Ft(),n=Wt(4);q(a),q(n);try{this.db.handleError(p(this.db.db,this.jb,-1,a,n)),this.jb=$(n,"i32");var r=$(a,"i32");return 0===r?(this.nb(),{done:!0}):(this.$a=new e(r,this.db),this.db.fb[r]=this.$a,{value:this.$a,done:!1})}catch(i){throw this.pb=W(this.jb),this.nb(),i}finally{Bt(t)}},t.prototype.nb=function(){xt(this.eb),this.eb=null},t.prototype.getRemainingSQL=function(){return null!==this.pb?this.pb:W(this.jb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(t.prototype[Symbol.iterator]=function(){return this}),n.prototype.run=function(e,t){if(!this.db)throw"Database closed";if(t){e=this.prepare(e,t);try{e.step()}finally{e.free()}}else this.handleError(u(this.db,e,0,0,a));return this},n.prototype.exec=function(t,n){if(!this.db)throw"Database closed";var r=Ft(),i=null;try{var o=Q(t)+1,s=Wt(o);G(t,P,s,o);var u=s,c=Wt(4);for(t=[];0!==$(u,"i8");){q(a),q(c),this.handleError(p(this.db,u,-1,a,c));var l=$(a,"i32");if(u=$(c,"i32"),0!==l){for(o=null,i=new e(l,this),null!=n&&i.bind(n);i.step();)null===o&&(o={columns:i.getColumnNames(),values:[]},t.push(o)),o.values.push(i.get());i.free()}}return t}catch(f){throw i&&i.free(),f}finally{Bt(r)}},n.prototype.each=function(e,t,n,r){"function"==typeof t&&(r=n,n=t,t=void 0),e=this.prepare(e,t);try{for(;e.step();)n(e.getAsObject())}finally{e.free()}if("function"==typeof r)return r()},n.prototype.prepare=function(t,n){if(q(a),this.handleError(l(this.db,t,-1,a,0)),0===(t=$(a,"i32")))throw"Nothing to prepare";var r=new e(t,this);return null!=n&&r.bind(n),this.fb[t]=r},n.prototype.iterateStatements=function(e){return new t(e,this)},n.prototype.export=function(){Object.values(this.fb).forEach((function(e){e.free()})),Object.values(this.Xa).forEach(I),this.Xa={},this.handleError(s(this.db));var e=function(e){var t={encoding:"binary"};if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw Error('Invalid encoding type "'+t.encoding+'"');var n,r=st(e,t.flags);e=nt(e).size;var a=new Uint8Array(e);return lt(r,a,0,e,0),"utf8"===t.encoding?n=B(a,0):"binary"===t.encoding&&(n=a),ut(r),n}(this.filename);return this.handleError(o(this.filename,a)),this.db=$(a,"i32"),e},n.prototype.close=function(){null!==this.db&&(Object.values(this.fb).forEach((function(e){e.free()})),Object.values(this.Xa).forEach(I),this.Xa={},this.handleError(s(this.db)),et("/"+this.filename),this.db=null)},n.prototype.handleError=function(e){if(0===e)return null;throw e=g(this.db),Error(e)},n.prototype.getRowsModified=function(){return c(this.db)},n.prototype.create_function=function(e,t){Object.prototype.hasOwnProperty.call(this.Xa,e)&&(E(this.Xa[e]),delete this.Xa[e]);var n=function(e){var t=k;if(!_){_=new WeakMap;for(var n=0;n<t.length;n++){var r=t.get(n);r&&_.set(r,n)}}if(_.has(e))e=_.get(e);else{if(T.length)n=T.pop();else{n=t.length;try{t.grow(1)}catch(s){if(!(s instanceof RangeError))throw s;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}}try{t.set(n,e)}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){var a={i:"i32",j:"i64",f:"f32",d:"f64"},i={parameters:[],results:[]};for(r=1;4>r;++r)i.parameters.push(a["viii"[r]]);r=new WebAssembly.Function(i,e)}else{for(i={i:127,j:126,f:125,d:124},(a=[1,0,1,96]).push(3),r=0;3>r;++r)a.push(i["iii"[r]]);a.push(0),a[1]=a.length-2,r=new Uint8Array([0,97,115,109,1,0,0,0].concat(a,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),r=new WebAssembly.Module(r),r=new WebAssembly.Instance(r,{e:{f:e}}).exports.f}t.set(n,r)}_.set(e,n),e=n}return e}((function(e,n,r){for(var a,i=[],o=0;o<n;o+=1){var s=$(r+4*o,"i32"),u=V(s);if(1===u||2===u)s=J(s);else if(3===u)s=Y(s);else if(4===u){s=H(u=s),u=X(u);for(var c=new Uint8Array(s),l=0;l<s;l+=1)c[l]=P[u+l];s=c}else s=null;i.push(s)}try{a=t.apply(null,i)}catch(f){return void re(e,f,-1)}switch(typeof a){case"boolean":ne(e,a?1:0);break;case"number":K(e,a);break;case"string":ee(e,a,-1,-1);break;case"object":null===a?Z(e):null!=a.length?(n=O(a),te(e,n,a.length,-1),xt(n)):re(e,"Wrong API use : tried to return a value of an unknown type ("+a+").",-1);break;default:Z(e)}}));return this.Xa[e]=n,this.handleError(z(this.db,e,t.length,1,0,n,0,0,0)),this},r.Database=n};var o,s={};for(o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);var u,c,l,f,d="./this.program";u="object"==typeof window,c="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,f=!u&&!l&&!c;var p,h,m,b,y="";l?(y=c?require$$2.dirname(y)+"/":__dirname+"/",p=function(e,t){return m||(m=require$$2),b||(b=require$$2),e=b.normalize(e),m.readFileSync(e,t?null:"utf8")},h=function(e){return(e=p(e,!0)).buffer||(e=new Uint8Array(e)),N(e.buffer),e},1<process.argv.length&&(d=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),module.exports=r,r.inspect=function(){return"[Emscripten Module object]"}):f?("undefined"!=typeof read&&(p=function(e){return read(e)}),h=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(N("object"==typeof(e=read(e,"binary"))),e)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||c)&&(c?y=self.location.href:document.currentScript&&(y=document.currentScript.src),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},c&&(h=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var w=r.print||console.log.bind(console),v=r.printErr||console.warn.bind(console);for(o in s)s.hasOwnProperty(o)&&(r[o]=s[o]);s=null,r.thisProgram&&(d=r.thisProgram);var _,g,T=[];function E(e){_.delete(k.get(e)),T.push(e)}function I(e){E(e)}function q(e){var t="i32";switch("*"===t.charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":P[e>>0]=0;break;case"i16":L[e>>1]=0;break;case"i32":j[e>>2]=0;break;case"i64":oe=[0,(ie=0,1<=+Math.abs(ie)?0<ie?(0|Math.min(+Math.floor(ie/4294967296),4294967295))>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],j[e>>2]=oe[0],j[e+4>>2]=oe[1];break;case"float":U[e>>2]=0;break;case"double":C[e>>3]=0;break;default:ne("invalid type for setValue: "+t)}}function $(e,t){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return P[e>>0];case"i16":return L[e>>1];case"i32":case"i64":return j[e>>2];case"float":return U[e>>2];case"double":return C[e>>3];default:ne("invalid type for getValue: "+t)}return null}r.wasmBinary&&(g=r.wasmBinary),r.noExitRuntime&&r.noExitRuntime,"object"!=typeof WebAssembly&&ne("no native wasm support detected");var R,k,M=!1;function N(e,t){e||ne("Assertion failed: "+t)}function S(e){var t=r["_"+e];return N(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function A(e,t,n,r){var a,i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);t=Wt(n),G(e,x,t,n)}return t},array:function(e){var t=Wt(e.length);return P.set(e,t),t}},o=S(e),s=[];if(e=0,r)for(var u=0;u<r.length;u++){var c=i[n[u]];c?(0===e&&(e=Ft()),s[u]=c(r[u])):s[u]=r[u]}return n=o.apply(null,s),a=n,n="string"===t?W(a):"boolean"===t?!!a:a,0!==e&&Bt(e),n}function O(e){var t=Pt(e.length);return e.subarray||e.slice?x.set(e,t):x.set(new Uint8Array(e),t),t}var D,P,x,L,j,U,C,F="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function B(e,t,n){var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.subarray&&F)return F.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var i=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function W(e,t){return e?B(x,e,t):""}function G(e,t,n,r){if(!(0<r))return 0;var a=n;r=n+r-1;for(var i=0;i<e.length;++i){var o=e.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++i)),127>=o){if(n>=r)break;t[n++]=o}else{if(2047>=o){if(n+1>=r)break;t[n++]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;t[n++]=224|o>>12}else{if(n+3>=r)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63}t[n++]=128|o>>6&63}t[n++]=128|63&o}}return t[n]=0,n-a}function Q(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),127>=r?++t:t=2047>=r?t+2:65535>=r?t+3:t+4}return t}function z(e){var t=Q(e)+1,n=Pt(t);return n&&G(e,P,n,t),n}function V(e){D=e,r.HEAP8=P=new Int8Array(e),r.HEAP16=L=new Int16Array(e),r.HEAP32=j=new Int32Array(e),r.HEAPU8=x=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=new Uint32Array(e),r.HEAPF32=U=new Float32Array(e),r.HEAPF64=C=new Float64Array(e)}var H=r.INITIAL_MEMORY||16777216;(R=r.wasmMemory?r.wasmMemory:new WebAssembly.Memory({initial:H/65536,maximum:32768}))&&(D=R.buffer),H=D.byteLength,V(D);var Y=[],X=[],J=[],K=[];function Z(){var e=r.preRun.shift();Y.unshift(e)}var ee=0,te=null;function ne(e){throw r.onAbort&&r.onAbort(e),v(e),M=!0,new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info.")}function re(e){var t=ue;return String.prototype.startsWith?t.startsWith(e):0===t.indexOf(e)}function ae(){return re("data:application/octet-stream;base64,")}r.preloadedImages={},r.preloadedAudios={};var ie,oe,se,ue="sql-wasm.wasm";if(!ae()){var ce=ue;ue=r.locateFile?r.locateFile(ce,y):y+ce}function le(){try{if(g)return new Uint8Array(g);if(h)return h(ue);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function fe(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(r);else{var n=t.Hb;"number"==typeof n?void 0===t.mb?k.get(n)():k.get(n)(t.mb):n(void 0===t.mb?null:t.mb)}}}function de(e,t){for(var n=0,r=e.length-1;0<=r;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e}function pe(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=de(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}function he(e){var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."}function me(e){if("/"===e)return"/";var t=(e=(e=pe(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)}function be(e){j[Dt()>>2]=e}function ye(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=de(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."}var we=[];function ve(e,t){we[e]={input:[],output:[],cb:t},He(e,_e)}var _e={open:function(e){var t=we[e.node.rdev];if(!t)throw new Se(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.cb.flush(e.tty)},flush:function(e){e.tty.cb.flush(e.tty)},read:function(e,t,n,r){if(!e.tty||!e.tty.cb.xb)throw new Se(60);for(var a=0,i=0;i<r;i++){try{var o=e.tty.cb.xb(e.tty)}catch(s){throw new Se(29)}if(void 0===o&&0===a)throw new Se(6);if(null==o)break;a++,t[n+i]=o}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,r){if(!e.tty||!e.tty.cb.qb)throw new Se(60);try{for(var a=0;a<r;a++)e.tty.cb.qb(e.tty,t[n+a])}catch(i){throw new Se(29)}return r&&(e.node.timestamp=Date.now()),a}},ge={xb:function(e){if(!e.input.length){var t=null;if(l){var n=Buffer.zb?Buffer.zb(256):new Buffer(256),r=0;try{r=m.readSync(process.stdin.fd,n,0,256,null)}catch(a){if(-1==a.toString().indexOf("EOF"))throw a;r=0}t=0<r?n.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=Nt(t,!0)}return e.input.shift()},qb:function(e,t){null===t||10===t?(w(B(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(w(B(e.output,0)),e.output=[])}},Te={qb:function(e,t){null===t||10===t?(v(B(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(v(B(e.output,0)),e.output=[])}},Ee={Va:null,Wa:function(){return Ee.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new Se(63);return Ee.Va||(Ee.Va={dir:{node:{Ua:Ee.Na.Ua,Ta:Ee.Na.Ta,lookup:Ee.Na.lookup,gb:Ee.Na.gb,rename:Ee.Na.rename,unlink:Ee.Na.unlink,rmdir:Ee.Na.rmdir,readdir:Ee.Na.readdir,symlink:Ee.Na.symlink},stream:{Za:Ee.Oa.Za}},file:{node:{Ua:Ee.Na.Ua,Ta:Ee.Na.Ta},stream:{Za:Ee.Oa.Za,read:Ee.Oa.read,write:Ee.Oa.write,sb:Ee.Oa.sb,hb:Ee.Oa.hb,ib:Ee.Oa.ib}},link:{node:{Ua:Ee.Na.Ua,Ta:Ee.Na.Ta,readlink:Ee.Na.readlink},stream:{}},ub:{node:{Ua:Ee.Na.Ua,Ta:Ee.Na.Ta},stream:Ve}}),Ue((n=je(e,t,n,r)).mode)?(n.Na=Ee.Va.dir.node,n.Oa=Ee.Va.dir.stream,n.Ma={}):32768==(61440&n.mode)?(n.Na=Ee.Va.file.node,n.Oa=Ee.Va.file.stream,n.Sa=0,n.Ma=null):40960==(61440&n.mode)?(n.Na=Ee.Va.link.node,n.Oa=Ee.Va.link.stream):8192==(61440&n.mode)&&(n.Na=Ee.Va.ub.node,n.Oa=Ee.Va.ub.stream),n.timestamp=Date.now(),e&&(e.Ma[t]=n),n},Sb:function(e){if(e.Ma&&e.Ma.subarray){for(var t=[],n=0;n<e.Sa;++n)t.push(e.Ma[n]);return t}return e.Ma},Tb:function(e){return e.Ma?e.Ma.subarray?e.Ma.subarray(0,e.Sa):new Uint8Array(e.Ma):new Uint8Array(0)},vb:function(e,t){var n=e.Ma?e.Ma.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.Ma,e.Ma=new Uint8Array(t),0<e.Sa&&e.Ma.set(n.subarray(0,e.Sa),0))},Pb:function(e,t){if(e.Sa!=t)if(0==t)e.Ma=null,e.Sa=0;else{if(!e.Ma||e.Ma.subarray){var n=e.Ma;e.Ma=new Uint8Array(t),n&&e.Ma.set(n.subarray(0,Math.min(t,e.Sa)))}else if(e.Ma||(e.Ma=[]),e.Ma.length>t)e.Ma.length=t;else for(;e.Ma.length<t;)e.Ma.push(0);e.Sa=t}},Na:{Ua:function(e){var t={};return t.dev=8192==(61440&e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Ue(e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.Sa:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.Gb=4096,t.blocks=Math.ceil(t.size/t.Gb),t},Ta:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Ee.Pb(e,t.size)},lookup:function(){throw Ae[44]},gb:function(e,t,n,r){return Ee.createNode(e,t,n,r)},rename:function(e,t,n){if(Ue(e.mode)){try{var r=Le(t,n)}catch(i){}if(r)for(var a in r.Ma)throw new Se(55)}delete e.parent.Ma[e.name],e.name=n,t.Ma[n]=e,e.parent=t},unlink:function(e,t){delete e.Ma[t]},rmdir:function(e,t){var n,r=Le(e,t);for(n in r.Ma)throw new Se(55);delete e.Ma[t]},readdir:function(e){var t,n=[".",".."];for(t in e.Ma)e.Ma.hasOwnProperty(t)&&n.push(t);return n},symlink:function(e,t,n){return(e=Ee.createNode(e,t,41471,0)).link=n,e},readlink:function(e){if(40960!=(61440&e.mode))throw new Se(28);return e.link}},Oa:{read:function(e,t,n,r,a){var i=e.node.Ma;if(a>=e.node.Sa)return 0;if(8<(e=Math.min(e.node.Sa-a,r))&&i.subarray)t.set(i.subarray(a,a+e),n);else for(r=0;r<e;r++)t[n+r]=i[a+r];return e},write:function(e,t,n,r,a,i){if(t.buffer===P.buffer&&(i=!1),!r)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.Ma||e.Ma.subarray)){if(i)return e.Ma=t.subarray(n,n+r),e.Sa=r;if(0===e.Sa&&0===a)return e.Ma=t.slice(n,n+r),e.Sa=r;if(a+r<=e.Sa)return e.Ma.set(t.subarray(n,n+r),a),r}if(Ee.vb(e,a+r),e.Ma.subarray&&t.subarray)e.Ma.set(t.subarray(n,n+r),a);else for(i=0;i<r;i++)e.Ma[a+i]=t[n+i];return e.Sa=Math.max(e.Sa,a+r),r},Za:function(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.Sa),0>t)throw new Se(28);return t},sb:function(e,t,n){Ee.vb(e.node,t+n),e.node.Sa=Math.max(e.node.Sa,t+n)},hb:function(e,t,n,r,a,i){if(N(0===t),32768!=(61440&e.node.mode))throw new Se(43);if(e=e.node.Ma,2&i||e.buffer!==D){for((0<r||r+n<e.length)&&(e=e.subarray?e.subarray(r,r+n):Array.prototype.slice.call(e,r,r+n)),r=!0,i=16384*Math.ceil(n/16384),t=Pt(i);n<i;)P[t+n++]=0;if(!(n=t))throw new Se(48);P.set(e,n)}else r=!1,n=e.byteOffset;return{Ob:n,kb:r}},ib:function(e,t,n,r,a){if(32768!=(61440&e.node.mode))throw new Se(43);return 2&a||Ee.Oa.write(e,t,0,r,n,!1),0}}},Ie=null,qe={},$e=[],Re=1,ke=null,Me=!0,Ne={},Se=null,Ae={};function Oe(e,t){if(t=t||{},!(e=ye("/",e)))return{path:"",node:null};var n,r={wb:!0,rb:0};for(n in r)void 0===t[n]&&(t[n]=r[n]);if(8<t.rb)throw new Se(32);e=de(e.split("/").filter((function(e){return!!e})),!1);var a=Ie;for(r="/",n=0;n<e.length;n++){var i=n===e.length-1;if(i&&t.parent)break;if(a=Le(a,e[n]),r=pe(r+"/"+e[n]),a.ab&&(!i||i&&t.wb)&&(a=a.ab.root),!i||t.Ya)for(i=0;40960==(61440&a.mode);)if(a=tt(r),a=Oe(r=ye(he(r),a),{rb:t.rb}).node,40<i++)throw new Se(32)}return{path:r,node:a}}function De(e){for(var t;;){if(e===e.parent)return e=e.Wa.yb,t?"/"!==e[e.length-1]?e+"/"+t:e+t:e;t=t?e.name+"/"+t:e.name,e=e.parent}}function Pe(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ke.length}function xe(e){var t=Pe(e.parent.id,e.name);if(ke[t]===e)ke[t]=e.bb;else for(t=ke[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function Le(e,t){var n;if(n=(n=Be(e,"x"))?n:e.Na.lookup?0:2)throw new Se(n,e);for(n=ke[Pe(e.id,t)];n;n=n.bb){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.Na.lookup(e,t)}function je(e,t,n,r){return t=Pe((e=new Mt(e,t,n,r)).parent.id,e.name),e.bb=ke[t],ke[t]=e}function Ue(e){return 16384==(61440&e)}var Ce={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Fe(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function Be(e,t){return Me||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2}function We(e,t){try{return Le(e,t),20}catch(n){}return Be(e,"wx")}function Ge(e,t,n){try{var r=Le(e,t)}catch(a){return a.Pa}if(e=Be(e,"wx"))return e;if(n){if(!Ue(r.mode))return 54;if(r===r.parent||"/"===De(r))return 10}else if(Ue(r.mode))return 31;return 0}function Qe(e,t){bt||((bt=function(){}).prototype={});var n,r=new bt;for(n in e)r[n]=e[n];return e=r,t=function(e){for(e=e||0;e<=4096;e++)if(!$e[e])return e;throw new Se(33)}(t),e.fd=t,$e[t]=e}var ze,Ve={open:function(e){e.Oa=qe[e.node.rdev].Oa,e.Oa.open&&e.Oa.open(e)},Za:function(){throw new Se(70)}};function He(e,t){qe[e]={Oa:t}}function Ye(e,t){var n="/"===t,r=!t;if(n&&Ie)throw new Se(10);if(!n&&!r){var a=Oe(t,{wb:!1});if(t=a.path,(a=a.node).ab)throw new Se(10);if(!Ue(a.mode))throw new Se(54)}t={type:e,Ub:{},yb:t,Mb:[]},(e=e.Wa(t)).Wa=t,t.root=e,n?Ie=e:a&&(a.ab=t,a.Wa&&a.Wa.Mb.push(t))}function Xe(e,t,n){var r=Oe(e,{parent:!0}).node;if(!(e=me(e))||"."===e||".."===e)throw new Se(28);var a=We(r,e);if(a)throw new Se(a);if(!r.Na.gb)throw new Se(63);return r.Na.gb(r,e,t,n)}function Je(e,t){Xe(e,1023&(void 0!==t?t:511)|16384,0)}function Ke(e,t,n){void 0===n&&(n=t,t=438),Xe(e,8192|t,n)}function Ze(e,t){if(!ye(e))throw new Se(44);var n=Oe(t,{parent:!0}).node;if(!n)throw new Se(44);var r=We(n,t=me(t));if(r)throw new Se(r);if(!n.Na.symlink)throw new Se(63);n.Na.symlink(n,t,e)}function et(e){var t=Oe(e,{parent:!0}).node,n=me(e),r=Le(t,n),a=Ge(t,n,!1);if(a)throw new Se(a);if(!t.Na.unlink)throw new Se(63);if(r.ab)throw new Se(10);try{Ne.willDeletePath&&Ne.willDeletePath(e)}catch(i){v("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+i.message)}t.Na.unlink(t,n),xe(r);try{Ne.onDeletePath&&Ne.onDeletePath(e)}catch(i){v("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+i.message)}}function tt(e){if(!(e=Oe(e).node))throw new Se(44);if(!e.Na.readlink)throw new Se(28);return ye(De(e.parent),e.Na.readlink(e))}function nt(e,t){if(!(e=Oe(e,{Ya:!t}).node))throw new Se(44);if(!e.Na.Ua)throw new Se(63);return e.Na.Ua(e)}function rt(e){return nt(e,!0)}function at(e,t){var n;if(!(n="string"==typeof e?Oe(e,{Ya:!0}).node:e).Na.Ta)throw new Se(63);n.Na.Ta(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})}function it(e){var t;if(!(t="string"==typeof e?Oe(e,{Ya:!0}).node:e).Na.Ta)throw new Se(63);t.Na.Ta(t,{timestamp:Date.now()})}function ot(e,t){if(0>t)throw new Se(28);var n;if(!(n="string"==typeof e?Oe(e,{Ya:!0}).node:e).Na.Ta)throw new Se(63);if(Ue(n.mode))throw new Se(31);if(32768!=(61440&n.mode))throw new Se(28);if(e=Be(n,"w"))throw new Se(e);n.Na.Ta(n,{size:t,timestamp:Date.now()})}function st(e,t,n,a){if(""===e)throw new Se(44);if("string"==typeof t){var i=Ce[t];if(void 0===i)throw Error("Unknown file open mode: "+t);t=i}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var o=e;else{e=pe(e);try{o=Oe(e,{Ya:!(131072&t)}).node}catch(s){}}if(i=!1,64&t)if(o){if(128&t)throw new Se(20)}else o=Xe(e,n,0),i=!0;if(!o)throw new Se(44);if(8192==(61440&o.mode)&&(t&=-513),65536&t&&!Ue(o.mode))throw new Se(54);if(!i&&(n=o?40960==(61440&o.mode)?32:Ue(o.mode)&&("r"!==Fe(t)||512&t)?31:Be(o,Fe(t)):44))throw new Se(n);512&t&&ot(o,0),t&=-131713,(a=Qe({node:o,path:De(o),flags:t,seekable:!0,position:0,Oa:o.Oa,Rb:[],error:!1},a)).Oa.open&&a.Oa.open(a),!r.logReadFiles||1&t||(yt||(yt={}),e in yt||(yt[e]=1,v("FS.trackingDelegate error on read file: "+e)));try{Ne.onOpenFile&&(o=0,1!=(2097155&t)&&(o|=1),0!=(2097155&t)&&(o|=2),Ne.onOpenFile(e,o))}catch(s){v("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+s.message)}return a}function ut(e){if(null===e.fd)throw new Se(8);e.ob&&(e.ob=null);try{e.Oa.close&&e.Oa.close(e)}catch(t){throw t}finally{$e[e.fd]=null}e.fd=null}function ct(e,t,n){if(null===e.fd)throw new Se(8);if(!e.seekable||!e.Oa.Za)throw new Se(70);if(0!=n&&1!=n&&2!=n)throw new Se(28);e.position=e.Oa.Za(e,t,n),e.Rb=[]}function lt(e,t,n,r,a){if(0>r||0>a)throw new Se(28);if(null===e.fd)throw new Se(8);if(1==(2097155&e.flags))throw new Se(8);if(Ue(e.node.mode))throw new Se(31);if(!e.Oa.read)throw new Se(28);var i=void 0!==a;if(i){if(!e.seekable)throw new Se(70)}else a=e.position;return t=e.Oa.read(e,t,n,r,a),i||(e.position+=t),t}function ft(e,t,n,r,a,i){if(0>r||0>a)throw new Se(28);if(null===e.fd)throw new Se(8);if(0==(2097155&e.flags))throw new Se(8);if(Ue(e.node.mode))throw new Se(31);if(!e.Oa.write)throw new Se(28);e.seekable&&1024&e.flags&&ct(e,0,2);var o=void 0!==a;if(o){if(!e.seekable)throw new Se(70)}else a=e.position;t=e.Oa.write(e,t,n,r,a,i),o||(e.position+=t);try{e.path&&Ne.onWriteToFile&&Ne.onWriteToFile(e.path)}catch(s){v("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+s.message)}return t}function dt(){Se||((Se=function(e,t){this.node=t,this.Qb=function(e){this.Pa=e},this.Qb(e),this.message="FS error"}).prototype=Error(),Se.prototype.constructor=Se,[44].forEach((function(e){Ae[e]=new Se(e),Ae[e].stack="<generic error, no stack>"})))}function pt(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n}function ht(e,t,n){e=pe("/dev/"+e);var r=pt(!!t,!!n);mt||(mt=64);var a=mt++<<8|0;He(a,{open:function(e){e.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,n,r,a){for(var i=0,o=0;o<a;o++){try{var s=t()}catch(u){throw new Se(29)}if(void 0===s&&0===i)throw new Se(6);if(null==s)break;i++,n[r+o]=s}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,r,a){for(var i=0;i<a;i++)try{n(t[r+i])}catch(o){throw new Se(29)}return a&&(e.node.timestamp=Date.now()),i}}),Ke(e,r,a)}var mt,bt,yt,wt={},vt={};function _t(e,t,n){try{var r=e(t)}catch(a){if(a&&a.node&&pe(t)!==pe(De(a.node)))return-54;throw a}return j[n>>2]=r.dev,j[n+4>>2]=0,j[n+8>>2]=r.ino,j[n+12>>2]=r.mode,j[n+16>>2]=r.nlink,j[n+20>>2]=r.uid,j[n+24>>2]=r.gid,j[n+28>>2]=r.rdev,j[n+32>>2]=0,oe=[r.size>>>0,(ie=r.size,1<=+Math.abs(ie)?0<ie?(0|Math.min(+Math.floor(ie/4294967296),4294967295))>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],j[n+40>>2]=oe[0],j[n+44>>2]=oe[1],j[n+48>>2]=4096,j[n+52>>2]=r.blocks,j[n+56>>2]=r.atime.getTime()/1e3|0,j[n+60>>2]=0,j[n+64>>2]=r.mtime.getTime()/1e3|0,j[n+68>>2]=0,j[n+72>>2]=r.ctime.getTime()/1e3|0,j[n+76>>2]=0,oe=[r.ino>>>0,(ie=r.ino,1<=+Math.abs(ie)?0<ie?(0|Math.min(+Math.floor(ie/4294967296),4294967295))>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],j[n+80>>2]=oe[0],j[n+84>>2]=oe[1],0}var gt=void 0;function Tt(){return j[(gt+=4)-4>>2]}function Et(e){if(!(e=$e[e]))throw new Se(8);return e}var It,qt,$t={};function Rt(){if(!It){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:d||"./this.program"};for(e in $t)t[e]=$t[e];var n=[];for(e in t)n.push(e+"="+t[e]);It=n}return It}function kt(e){for(var t=qt();qt()-t<e/1e3;);}function Mt(e,t,n,r){e||(e=this),this.parent=e,this.Wa=e.Wa,this.ab=null,this.id=Re++,this.name=t,this.mode=n,this.Na={},this.Oa={},this.rdev=r}function Nt(e,t){var n=Array(Q(e)+1);return e=G(e,n,0,n.length),t&&(n.length=e),n}qt=l?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()},r._usleep=kt,Object.defineProperties(Mt.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),dt(),ke=Array(4096),Ye(Ee,"/"),Je("/tmp"),Je("/home"),Je("/home/web_user"),function(){Je("/dev"),He(259,{read:function(){return 0},write:function(e,t,n,r){return r}}),Ke("/dev/null",259),ve(1280,ge),ve(1536,Te),Ke("/dev/tty",1280),Ke("/dev/tty1",1536);var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}if(l)try{var t=require$$2;return function(){return t.randomBytes(1)[0]}}catch(n){}return function(){ne("randomDevice")}}();ht("random",e),ht("urandom",e),Je("/dev/shm"),Je("/dev/shm/tmp")}(),Je("/proc"),Je("/proc/self"),Je("/proc/self/fd"),Ye({Wa:function(){var e=je("/proc/self","fd",16895,73);return e.Na={lookup:function(e,t){var n=$e[+t];if(!n)throw new Se(8);return(e={parent:null,Wa:{yb:"fake"},Na:{readlink:function(){return n.path}}}).parent=e}},e}},"/proc/self/fd"),X.push({Hb:function(){At()}});var St={b:function(e,t,n,r){ne("Assertion failed: "+W(e)+", at: "+[t?W(t):"unknown filename",n,r?W(r):"unknown function"])},q:function(e,t){!function(){function e(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}if(!se){se=!0,j[Ct()>>2]=60*(new Date).getTimezoneOffset();var t=(new Date).getFullYear(),n=new Date(t,0,1);t=new Date(t,6,1),j[Ut()>>2]=Number(n.getTimezoneOffset()!=t.getTimezoneOffset());var r=e(n),a=e(t);r=z(r),a=z(a),t.getTimezoneOffset()<n.getTimezoneOffset()?(j[jt()>>2]=r,j[jt()+4>>2]=a):(j[jt()>>2]=a,j[jt()+4>>2]=r)}}(),e=new Date(1e3*j[e>>2]),j[t>>2]=e.getSeconds(),j[t+4>>2]=e.getMinutes(),j[t+8>>2]=e.getHours(),j[t+12>>2]=e.getDate(),j[t+16>>2]=e.getMonth(),j[t+20>>2]=e.getFullYear()-1900,j[t+24>>2]=e.getDay();var n=new Date(e.getFullYear(),0,1);j[t+28>>2]=(e.getTime()-n.getTime())/864e5|0,j[t+36>>2]=-60*e.getTimezoneOffset();var r=new Date(e.getFullYear(),6,1).getTimezoneOffset();return e=0|(r!=(n=n.getTimezoneOffset())&&e.getTimezoneOffset()==Math.min(n,r)),j[t+32>>2]=e,e=j[jt()+(e?4:0)>>2],j[t+40>>2]=e,t},z:function(e,t){try{var n;if(e=W(e),-8&t)var r=-28;else(n=Oe(e,{Ya:!0}).node)?(e="",4&t&&(e+="r"),2&t&&(e+="w"),1&t&&(e+="x"),r=e&&Be(n,e)?-2:0):r=-44;return r}catch(a){return void 0!==wt&&a instanceof Se||ne(a),-a.Pa}},i:function(e,t){try{return at(e=W(e),t),0}catch(n){return void 0!==wt&&n instanceof Se||ne(n),-n.Pa}},t:function(e){try{return it(e=W(e)),0}catch(t){return void 0!==wt&&t instanceof Se||ne(t),-t.Pa}},j:function(e,t){try{var n=$e[e];if(!n)throw new Se(8);return at(n.node,t),0}catch(r){return void 0!==wt&&r instanceof Se||ne(r),-r.Pa}},u:function(e){try{var t=$e[e];if(!t)throw new Se(8);return it(t.node),0}catch(n){return void 0!==wt&&n instanceof Se||ne(n),-n.Pa}},c:function(e,t,n){gt=n;try{var r=Et(e);switch(t){case 0:var a=Tt();return 0>a?-28:st(r.path,r.flags,0,a).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:return a=Tt(),r.flags|=a,0;case 12:return a=Tt(),L[a+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return be(28),-1;default:return-28}}catch(i){return void 0!==wt&&i instanceof Se||ne(i),-i.Pa}},K:function(e,t){try{return _t(nt,Et(e).path,t)}catch(n){return void 0!==wt&&n instanceof Se||ne(n),-n.Pa}},v:function(e,t,n){try{var r=$e[e];if(!r)throw new Se(8);if(0==(2097155&r.flags))throw new Se(28);return ot(r.node,n),0}catch(a){return void 0!==wt&&a instanceof Se||ne(a),-a.Pa}},w:function(e,t){try{return 0===t?-28:t<Q("/")+1?-68:(G("/",x,e,t),e)}catch(n){return void 0!==wt&&n instanceof Se||ne(n),-n.Pa}},s:function(){return 0},e:function(){return 42},J:function(e,t){try{return _t(rt,e=W(e),t)}catch(n){return void 0!==wt&&n instanceof Se||ne(n),-n.Pa}},I:function(e,t){try{return"/"===(e=pe(e=W(e)))[e.length-1]&&(e=e.substr(0,e.length-1)),Je(e,t),0}catch(n){return void 0!==wt&&n instanceof Se||ne(n),-n.Pa}},G:function(e,t,n,r,a,i){try{e:{i<<=12;var o=!1;if(0!=(16&r)&&e%16384!=0)var s=-28;else{if(0!=(32&r)){var u=Gt(16384,t);if(!u){s=-48;break e}Ot(u,0,t),o=!0}else{var c=$e[a];if(!c){s=-8;break e}var l=i;if(0!=(2&n)&&0==(2&r)&&2!=(2097155&c.flags))throw new Se(2);if(1==(2097155&c.flags))throw new Se(2);if(!c.Oa.hb)throw new Se(43);var f=c.Oa.hb(c,e,t,l,n,r);u=f.Ob,o=f.kb}vt[u]={Lb:u,Kb:t,kb:o,fd:a,Nb:n,flags:r,offset:i},s=u}}return s}catch(d){return void 0!==wt&&d instanceof Se||ne(d),-d.Pa}},H:function(e,t){try{if(-1==(0|e)||0===t)var n=-28;else{var r=vt[e];if(r&&t===r.Kb){var a=$e[r.fd];if(2&r.Nb){var i=r.flags,o=r.offset,s=x.slice(e,e+t);a&&a.Oa.ib&&a.Oa.ib(a,s,o,t,i)}vt[e]=null,r.kb&&xt(r.Lb)}n=0}return n}catch(u){return void 0!==wt&&u instanceof Se||ne(u),-u.Pa}},k:function(e,t,n){gt=n;try{return st(W(e),t,Tt()).fd}catch(r){return void 0!==wt&&r instanceof Se||ne(r),-r.Pa}},D:function(e,t,n){try{return lt(Et(e),P,t,n)}catch(r){return void 0!==wt&&r instanceof Se||ne(r),-r.Pa}},C:function(e,t,n){try{if(e=W(e),0>=n)var r=-28;else{var a=tt(e),i=Math.min(n,Q(a)),o=P[t+i];G(a,x,t,n+1),P[t+i]=o,r=i}return r}catch(s){return void 0!==wt&&s instanceof Se||ne(s),-s.Pa}},E:function(e){try{var t=Oe(e=W(e),{parent:!0}).node,n=me(e),r=Le(t,n),a=Ge(t,n,!0);if(a)throw new Se(a);if(!t.Na.rmdir)throw new Se(63);if(r.ab)throw new Se(10);try{Ne.willDeletePath&&Ne.willDeletePath(e)}catch(i){v("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+i.message)}t.Na.rmdir(t,n),xe(r);try{Ne.onDeletePath&&Ne.onDeletePath(e)}catch(i){v("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+i.message)}return 0}catch(i){return void 0!==wt&&i instanceof Se||ne(i),-i.Pa}},g:function(e,t){try{return _t(nt,e=W(e),t)}catch(n){return void 0!==wt&&n instanceof Se||ne(n),-n.Pa}},y:function(e){try{return et(e=W(e)),0}catch(t){return void 0!==wt&&t instanceof Se||ne(t),-t.Pa}},m:function(e,t,n){x.copyWithin(e,t,t+n)},d:function(e){e>>>=0;var t=x.length;if(2147483648<e)return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296),0<(r=Math.max(16777216,e,r))%65536&&(r+=65536-r%65536);e:{try{R.grow(Math.min(2147483648,r)-D.byteLength+65535>>>16),V(R.buffer);var a=1;break e}catch(i){}a=void 0}if(a)return!0}return!1},o:function(e,t){var n=0;return Rt().forEach((function(r,a){var i=t+n;for(a=j[e+4*a>>2]=i,i=0;i<r.length;++i)P[a++>>0]=r.charCodeAt(i);P[a>>0]=0,n+=r.length+1})),0},p:function(e,t){var n=Rt();j[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),j[t>>2]=r,0},f:function(e){try{return ut(Et(e)),0}catch(t){return void 0!==wt&&t instanceof Se||ne(t),t.Pa}},n:function(e,t){try{var n=Et(e);return P[t>>0]=n.tty?2:Ue(n.mode)?3:40960==(61440&n.mode)?7:4,0}catch(r){return void 0!==wt&&r instanceof Se||ne(r),r.Pa}},l:function(e,t,n,r,a){try{var i=Et(e);return-9007199254740992>=(e=4294967296*n+(t>>>0))||9007199254740992<=e?-61:(ct(i,e,r),oe=[i.position>>>0,(ie=i.position,1<=+Math.abs(ie)?0<ie?(0|Math.min(+Math.floor(ie/4294967296),4294967295))>>>0:~~+Math.ceil((ie-+(~~ie>>>0))/4294967296)>>>0:0)],j[a>>2]=oe[0],j[a+4>>2]=oe[1],i.ob&&0===e&&0===r&&(i.ob=null),0)}catch(o){return void 0!==wt&&o instanceof Se||ne(o),o.Pa}},x:function(e){try{var t=Et(e);return t.Oa&&t.Oa.fsync?-t.Oa.fsync(t):0}catch(n){return void 0!==wt&&n instanceof Se||ne(n),n.Pa}},F:function(e,t,n,r){try{e:{for(var a=Et(e),i=e=0;i<n;i++){var o=ft(a,P,j[t+8*i>>2],j[t+(8*i+4)>>2],void 0);if(0>o){var s=-1;break e}e+=o}s=e}return j[r>>2]=s,0}catch(u){return void 0!==wt&&u instanceof Se||ne(u),u.Pa}},h:function(e){var t=Date.now();return j[e>>2]=t/1e3|0,j[e+4>>2]=t%1e3*1e3|0,0},a:R,A:function(e,t){if(0===e)return be(28),-1;var n=j[e>>2];return 0>(e=j[e+4>>2])||999999999<e||0>n?(be(28),-1):(0!==t&&(j[t>>2]=0,j[t+4>>2]=0),kt(1e6*n+e/1e3))},B:function(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:case 79:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return be(28),-1},L:function(e){var t=Date.now()/1e3|0;return e&&(j[e>>2]=t),t},r:function(e,t){if(t){var n=1e3*j[t+8>>2];n+=j[t+12>>2]/1e3}else n=Date.now();e=W(e);try{t=n;var a=Oe(e,{Ya:!0}).node;return a.Na.Ta(a,{timestamp:Math.max(t,n)}),0}catch(i){if(!((e=i)instanceof Se)){e+=" : ";e:{if(!(a=Error()).stack){try{throw Error()}catch(o){a=o}if(!a.stack){a="(no stack trace available)";break e}}a=a.stack.toString()}throw r.extraStackTrace&&(a+="\n"+r.extraStackTrace()),a=function(e){return e.replace(/\b_Z[\w\d_]+/g,(function(e){return e==e?e:e+" ["+e+"]"}))}(a),e+a}return be(e.Pa),-1}}};!function(){function e(e){r.asm=e.exports,k=r.asm.M,ee--,r.monitorRunDependencies&&r.monitorRunDependencies(ee),0==ee&&te&&(e=te,te=null,e())}function t(t){e(t.instance)}function n(e){return(g||!u&&!c||"function"!=typeof fetch||re("file://")?Promise.resolve().then(le):fetch(ue,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ue+"'";return e.arrayBuffer()})).catch((function(){return le()}))).then((function(e){return WebAssembly.instantiate(e,a)})).then(e,(function(e){v("failed to asynchronously prepare wasm: "+e),ne(e)}))}var a={a:St};if(ee++,r.monitorRunDependencies&&r.monitorRunDependencies(ee),r.instantiateWasm)try{return r.instantiateWasm(a,e)}catch(i){return v("Module.instantiateWasm callback failed with error: "+i),!1}!function(){if(g||"function"!=typeof WebAssembly.instantiateStreaming||ae()||re("file://")||"function"!=typeof fetch)return n(t);fetch(ue,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,a).then(t,(function(e){return v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),n(t)}))}))}()}();var At=r.___wasm_call_ctors=function(){return(At=r.___wasm_call_ctors=r.asm.N).apply(null,arguments)},Ot=r._memset=function(){return(Ot=r._memset=r.asm.O).apply(null,arguments)};r._sqlite3_free=function(){return(r._sqlite3_free=r.asm.P).apply(null,arguments)};var Dt=r.___errno_location=function(){return(Dt=r.___errno_location=r.asm.Q).apply(null,arguments)};r._sqlite3_finalize=function(){return(r._sqlite3_finalize=r.asm.R).apply(null,arguments)},r._sqlite3_reset=function(){return(r._sqlite3_reset=r.asm.S).apply(null,arguments)},r._sqlite3_clear_bindings=function(){return(r._sqlite3_clear_bindings=r.asm.T).apply(null,arguments)},r._sqlite3_value_blob=function(){return(r._sqlite3_value_blob=r.asm.U).apply(null,arguments)},r._sqlite3_value_text=function(){return(r._sqlite3_value_text=r.asm.V).apply(null,arguments)},r._sqlite3_value_bytes=function(){return(r._sqlite3_value_bytes=r.asm.W).apply(null,arguments)},r._sqlite3_value_double=function(){return(r._sqlite3_value_double=r.asm.X).apply(null,arguments)},r._sqlite3_value_int=function(){return(r._sqlite3_value_int=r.asm.Y).apply(null,arguments)},r._sqlite3_value_type=function(){return(r._sqlite3_value_type=r.asm.Z).apply(null,arguments)},r._sqlite3_result_blob=function(){return(r._sqlite3_result_blob=r.asm._).apply(null,arguments)},r._sqlite3_result_double=function(){return(r._sqlite3_result_double=r.asm.$).apply(null,arguments)},r._sqlite3_result_error=function(){return(r._sqlite3_result_error=r.asm.aa).apply(null,arguments)},r._sqlite3_result_int=function(){return(r._sqlite3_result_int=r.asm.ba).apply(null,arguments)},r._sqlite3_result_int64=function(){return(r._sqlite3_result_int64=r.asm.ca).apply(null,arguments)},r._sqlite3_result_null=function(){return(r._sqlite3_result_null=r.asm.da).apply(null,arguments)},r._sqlite3_result_text=function(){return(r._sqlite3_result_text=r.asm.ea).apply(null,arguments)},r._sqlite3_step=function(){return(r._sqlite3_step=r.asm.fa).apply(null,arguments)},r._sqlite3_column_count=function(){return(r._sqlite3_column_count=r.asm.ga).apply(null,arguments)},r._sqlite3_data_count=function(){return(r._sqlite3_data_count=r.asm.ha).apply(null,arguments)},r._sqlite3_column_blob=function(){return(r._sqlite3_column_blob=r.asm.ia).apply(null,arguments)},r._sqlite3_column_bytes=function(){return(r._sqlite3_column_bytes=r.asm.ja).apply(null,arguments)},r._sqlite3_column_double=function(){return(r._sqlite3_column_double=r.asm.ka).apply(null,arguments)},r._sqlite3_column_text=function(){return(r._sqlite3_column_text=r.asm.la).apply(null,arguments)},r._sqlite3_column_type=function(){return(r._sqlite3_column_type=r.asm.ma).apply(null,arguments)},r._sqlite3_column_name=function(){return(r._sqlite3_column_name=r.asm.na).apply(null,arguments)},r._sqlite3_bind_blob=function(){return(r._sqlite3_bind_blob=r.asm.oa).apply(null,arguments)},r._sqlite3_bind_double=function(){return(r._sqlite3_bind_double=r.asm.pa).apply(null,arguments)},r._sqlite3_bind_int=function(){return(r._sqlite3_bind_int=r.asm.qa).apply(null,arguments)},r._sqlite3_bind_text=function(){return(r._sqlite3_bind_text=r.asm.ra).apply(null,arguments)},r._sqlite3_bind_parameter_index=function(){return(r._sqlite3_bind_parameter_index=r.asm.sa).apply(null,arguments)},r._sqlite3_sql=function(){return(r._sqlite3_sql=r.asm.ta).apply(null,arguments)},r._sqlite3_normalized_sql=function(){return(r._sqlite3_normalized_sql=r.asm.ua).apply(null,arguments)},r._sqlite3_errmsg=function(){return(r._sqlite3_errmsg=r.asm.va).apply(null,arguments)},r._sqlite3_exec=function(){return(r._sqlite3_exec=r.asm.wa).apply(null,arguments)},r._sqlite3_prepare_v2=function(){return(r._sqlite3_prepare_v2=r.asm.xa).apply(null,arguments)},r._sqlite3_changes=function(){return(r._sqlite3_changes=r.asm.ya).apply(null,arguments)},r._sqlite3_close_v2=function(){return(r._sqlite3_close_v2=r.asm.za).apply(null,arguments)},r._sqlite3_create_function_v2=function(){return(r._sqlite3_create_function_v2=r.asm.Aa).apply(null,arguments)},r._sqlite3_open=function(){return(r._sqlite3_open=r.asm.Ba).apply(null,arguments)};var Pt=r._malloc=function(){return(Pt=r._malloc=r.asm.Ca).apply(null,arguments)},xt=r._free=function(){return(xt=r._free=r.asm.Da).apply(null,arguments)};r._RegisterExtensionFunctions=function(){return(r._RegisterExtensionFunctions=r.asm.Ea).apply(null,arguments)};var Lt,jt=r.__get_tzname=function(){return(jt=r.__get_tzname=r.asm.Fa).apply(null,arguments)},Ut=r.__get_daylight=function(){return(Ut=r.__get_daylight=r.asm.Ga).apply(null,arguments)},Ct=r.__get_timezone=function(){return(Ct=r.__get_timezone=r.asm.Ha).apply(null,arguments)},Ft=r.stackSave=function(){return(Ft=r.stackSave=r.asm.Ia).apply(null,arguments)},Bt=r.stackRestore=function(){return(Bt=r.stackRestore=r.asm.Ja).apply(null,arguments)},Wt=r.stackAlloc=function(){return(Wt=r.stackAlloc=r.asm.Ka).apply(null,arguments)},Gt=r._memalign=function(){return(Gt=r._memalign=r.asm.La).apply(null,arguments)};function Qt(){function e(){if(!Lt&&(Lt=!0,r.calledRun=!0,!M)){if(r.noFSInit||ze||(ze=!0,dt(),r.stdin=r.stdin,r.stdout=r.stdout,r.stderr=r.stderr,r.stdin?ht("stdin",r.stdin):Ze("/dev/tty","/dev/stdin"),r.stdout?ht("stdout",null,r.stdout):Ze("/dev/tty","/dev/stdout"),r.stderr?ht("stderr",null,r.stderr):Ze("/dev/tty1","/dev/stderr"),st("/dev/stdin","r"),st("/dev/stdout","w"),st("/dev/stderr","w")),fe(X),Me=!1,fe(J),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var e=r.postRun.shift();K.unshift(e)}fe(K)}}if(!(0<ee)){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)Z();fe(Y),0<ee||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e())}}if(r.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?S(e):function(){return A(e,t,n,arguments)}},r.UTF8ToString=W,r.stackSave=Ft,r.stackRestore=Bt,r.stackAlloc=Wt,te=function e(){Lt||Qt(),Lt||(te=e)},r.run=Qt,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();return Qt(),a})))},module.exports=initSqlJs2,module.exports.default=initSqlJs2;var initSqlJs=sqlWasm.exports,urlJoin={exports:{}};!function(e){var t,n;t=commonjsGlobal,n=function(){function e(e){var t=[];if(0===e.length)return"";if("string"!=typeof e[0])throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var n=e.shift();e[0]=n+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<e.length;r++){var a=e[r];if("string"!=typeof a)throw new TypeError("Url must be a string. Received "+a);""!==a&&(r>0&&(a=a.replace(/^[\/]+/,"")),a=r<e.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),t.push(a))}var i=t.join("/"),o=(i=i.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return i=o.shift()+(o.length>0?"?":"")+o.join("&")}return function(){return e("object"==typeof arguments[0]?arguments[0]:[].slice.call(arguments))}},e.exports?e.exports=n():t.urljoin=n()}(urlJoin);var urljoin=urlJoin.exports;const instanceOfAny=(e,t)=>t.some((t=>e instanceof t));let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{t(wrap(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&cursorRequestMap.set(t,e)})).catch((()=>{})),reverseTransformCache.set(t,e),t}function cacheDonePromiseForTransaction(e){if(transactionDoneMap.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));transactionDoneMap.set(e,t)}let idbProxyTraps={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return transactionDoneMap.get(e);if("objectStoreNames"===t)return e.objectStoreNames||transactionStoreNamesMap.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function replaceTraps(e){idbProxyTraps=e(idbProxyTraps)}function wrapFunction(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?getCursorAdvanceMethods().includes(e)?function(...t){return e.apply(unwrap(this),t),wrap(cursorRequestMap.get(this))}:function(...t){return wrap(e.apply(unwrap(this),t))}:function(t,...n){const r=e.call(unwrap(this),t,...n);return transactionStoreNamesMap.set(r,t.sort?t.sort():[t]),wrap(r)}}function transformCachableValue(e){return"function"==typeof e?wrapFunction(e):(e instanceof IDBTransaction&&cacheDonePromiseForTransaction(e),instanceOfAny(e,getIdbProxyableTypes())?new Proxy(e,idbProxyTraps):e)}function wrap(e){if(e instanceof IDBRequest)return promisifyRequest(e);if(transformCache.has(e))return transformCache.get(e);const t=transformCachableValue(e);return t!==e&&(transformCache.set(e,t),reverseTransformCache.set(t,e)),t}const unwrap=e=>reverseTransformCache.get(e);function openDB(e,t,{blocked:n,upgrade:r,blocking:a,terminated:i}={}){const o=indexedDB.open(e,t),s=wrap(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(wrap(o.result),e.oldVersion,e.newVersion,wrap(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),s.then((e=>{i&&e.addEventListener("close",(()=>i())),a&&e.addEventListener("versionchange",(()=>a()))})).catch((()=>{})),s}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(cachedMethods.get(t))return cachedMethods.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=writeMethods.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!readMethods.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,a?"readwrite":"readonly");let o=i.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),a&&i.done]))[0]};return cachedMethods.set(t,i),i}async function open(e){return openDB(e,1,{upgrade:t=>t.createObjectStore(e)}).then((t=>({get:n=>t.get(e,n),put:(n,r)=>t.put(e,r,n),clear:()=>t.clear(e),keys:()=>t.getAllKeys(e)})))}replaceTraps((e=>__spreadProps(__spreadValues({},e),{get:(t,n,r)=>getMethod(t,n)||e.get(t,n,r),has:(t,n)=>!!getMethod(t,n)||e.has(t,n)})));var KeyValStore={open:open};const error=e=>{throw e};async function maintainCache(e,t){return fetch(t).then((e=>e||error("not-found"))).then((e=>e.json())).then((async t=>{let n=await KeyValStore.open(e);return await n.get("version")!=t.version&&await n.clear(),n.put("version",t.version)})).then((e=>{}))}async function fetchFromCache(e,t,n){let r=n||t;return KeyValStore.open(e).then((e=>e.get(r))).then((e=>e||error("not-cached"))).catch((n=>{if("not-cached"==n)return fetch(t).then((e=>e||error("not-found"))).then((e=>e.text())).then((async t=>await KeyValStore.open(e).then((e=>e.put(r,t))).then((e=>t))));throw n}))}function setWaitFor(e){waitForDefault=e}let waitForDefault=0;function waitFor(e=waitForDefault,t){return new Promise((n=>{e>0?setTimeout((()=>n(t)),e):n(t)}))}async function createTable$9(e,t,n){return waitFor().then((r=>{e.run(t.createTable),e.run(t.createIndices),n&&n({done:"table",table:t.tablename})})).catch((e=>{throw new Error(`createTable "${t.tablename}"\n${e.message}`)}))}function*parseCSV(e,t){var n,r;const a=(null==t?void 0:t.separator)||",",i=(null==t?void 0:t.delimiter)||'"';let o=[],s=0,u=!1;for(let c=0;c<e.length;c++){let t=e.charAt(c),r=e.charAt(c+1);o[s]=o[s]||"",t==i&&u&&r==i?(o[s]+=t,c++):t!=i?t!=a||u?"\r"!=t&&"\n"!=t||u?o[s]+=t:("\r"==t&&"\n"==r&&c++,(null==(n=o[0])?void 0:n.length)>0&&(yield o),o=[],s=0):s++:u=!u}(null==(r=o[0])?void 0:r.length)>0&&(yield o)}function createInsertSQL(e,t,n){let r=n.next().value.map((e=>`[${e}]`)).join(", "),a=[];for(let i of n){let e=i.map(((e,n)=>columnToSQL(e,n,t)));a.push("("+e.join(",")+")")}return`INSERT INTO ${e} (${r}) VALUES ${a.join(",")}`}function columnToSQL(e,t,n){switch(n[t]){case"string":return e?`"${e}"`:"NULL";case"number":return e?+e:"NULL";case"date":return e?new Date(e).valueOf()/1e3:"NULL";default:throw new Error("Unknown column type: {type}")}}async function insertFetchedData(e,t,n,r,a){return waitFor().then((e=>fetchFromCache(t,r))).then((e=>parseCSV(e))).then((e=>createInsertSQL(n.tablename,n.columnTypes,e))).then((t=>e.run(t))).then((e=>a&&a({done:"insert",table:n.tablename}))).catch((e=>{throw new Error(`insertFetchedData "${n.tablename}" "${r}"\n${e.message}"`)}))}async function checkDependencies(e,t){for(let n of e){let e,t,r,a=getPathFor(this.basedir,n.tablename);try{e=this.db.prepare("select cachekey \n\t\t\t\tfrom cachekeys_loaded\n\t\t\t\twhere cachekey = $cachekey"),t=e.get({$cachekey:a})[0]}finally{e&&e.free()}void 0===t&&(r=this.fetchQueue.get(a),void 0===r&&(r=insertFetchedData(this.db,this.cachename,n,a,this.progress).then((e=>this.db.run("insert into cachekeys_loaded values ($cachekey)",{$cachekey:a}))).then((e=>this.fetchQueue.delete(a))),this.fetchQueue.set(a,r)),await r)}}function getPathFor(basedir,table,opts){const paths={circuits:"circuits.csv",constructors:"constructors.csv",constructors_colours:"constructors_colours.csv",drivers:"drivers.csv",qualifying:"qualifying.csv",races:"races.csv",status:"status.csv",results:"results_${Math.floor(opts.$year / 10) * 10}.csv"};return urljoin(basedir,eval("`"+paths[table]+"`"))}function getOne(e,t,n,r){let a,i;try{a=e.prepare(t),i=a.getAsObject(n)}finally{a&&a.free()}return r?r(i):i}const tablename$8="circuits",createTable$8='CREATE TABLE "circuits" (\n\t"circuitId"\tINTEGER NOT NULL UNIQUE,\n\t"name"\tTEXT,\n\t"location"\tTEXT,\n\t"country"\tTEXT,\n\t"lat"\tREAL,\n\t"lng"\tREAL,\n\t"alt"\tINTEGER,\n\tPRIMARY KEY("circuitId"))',createIndices$8="",columnTypes$8=["number","string","string","string","number","number","number"],table$8={tablename:tablename$8,createTable:createTable$8,createIndices:createIndices$8,columnTypes:columnTypes$8},stmt$3="select *\n\tfrom circuits\n\twhere circuitId = $circuitId",dependencies$3=[table$8];async function getCircuit(e){let t={$circuitId:e};return await this.checkDependencies(dependencies$3,t),getOne(this.db,stmt$3,t)}const tablename$7="drivers",createTable$7='CREATE TABLE "drivers" (\n\t"driverId"\tINTEGER NOT NULL UNIQUE,\n\t"number"\tINTEGER,\n\t"code"\tTEXT,\n\t"forename"\tTEXT,\n\t"surname"\tTEXT,\n\t"dob"\tINTEGER,\n\t"nationality"\tTEXT,\n\tPRIMARY KEY("driverId"))',createIndices$7="",columnTypes$7=["number","number","string","string","string","date","string"],table$7={tablename:tablename$7,createTable:createTable$7,createIndices:createIndices$7,columnTypes:columnTypes$7},stmt$2='select * \n\tfrom drivers \n\twhere (drivers.forename || " " || drivers.surname) \n\t\tlike $name\n\tlimit 1',mapFromSQL$2=e=>__spreadProps(__spreadValues({},e),{dob:new Date(1e3*e.dob)}),dependencies$2=[table$7];async function getDriverByName(e){let t={$name:e};return await this.checkDependencies(dependencies$2,t),getOne(this.db,stmt$2,t,mapFromSQL$2)}function getMany(e,t,n,r){let a,i=[];try{for(a=e.prepare(t),a.bind(n);a.step();){let e=a.getAsObject();i.push(r?r(e):e)}}finally{a&&a.free()}return i}const tablename$6="races",createTable$6='CREATE TABLE "races" (\n\t"raceId"\tINTEGER NOT NULL UNIQUE,\n\t"circuitId"\tINTEGER,\n\t"year"\tINTEGER,\n\t"round"\tINTEGER,\n\t"title"\tTEXT,\n\t"when"\tINTEGER,\n\tPRIMARY KEY("raceId"))',createIndices$6="",columnTypes$6=["number","number","number","number","string","date"],table$6={tablename:tablename$6,createTable:createTable$6,createIndices:createIndices$6,columnTypes:columnTypes$6},stmt$1="select races.*, circuits.*\n\tfrom races\n\tjoin circuits on races.circuitId = circuits.circuitId\n\twhere year = $year\n\torder by round",mapFromSQL$1=e=>__spreadProps(__spreadValues({},e),{when:new Date(1e3*e.when)}),dependencies$1=[table$6,table$8];async function getJoinedRaces(e){let t={$year:e};return await this.checkDependencies(dependencies$1,t),getMany(this.db,stmt$1,t,mapFromSQL$1)}const tablename$5="constructors_colours",createTable$5='CREATE TABLE "constructors_colours" (\n\t"constructorColourId"\tINTEGER NOT NULL DEFAULT 0 UNIQUE,\n\t"constructorId"\tINTEGER,\n\t"year"\tINTEGER,\n\t"colour"\tTEXT,\n\tPRIMARY KEY("constructorColourId" AUTOINCREMENT))',createIndices$5="",columnTypes$5=["number","number","number","string"],table$5={tablename:tablename$5,createTable:createTable$5,createIndices:createIndices$5,columnTypes:columnTypes$5},tablename$4="constructors",createTable$4='CREATE TABLE "constructors" (\n\t"constructorId"\tINTEGER NOT NULL UNIQUE,\n\t"name"\tTEXT,\n\t"nationality"\tTEXT,\n\tPRIMARY KEY("constructorId"))',createIndices$4="",columnTypes$4=["number","string","string"],table$4={tablename:tablename$4,createTable:createTable$4,createIndices:createIndices$4,columnTypes:columnTypes$4},tablename$3="results",createTable$3='CREATE TABLE "results" (\n\t"resultId"\tINTEGER NOT NULL UNIQUE,\n\t"raceId"\tINTEGER,\n\t"driverId"\tINTEGER,\n\t"constructorId"\tINTEGER,\n\t"number"\tINTEGER,\n\t"grid"\tINTEGER,\n\t"position"\tINTEGER,\n\t"positionText"\tTEXT,\n\t"positionOrder"\tINTEGER,\n\t"points"\tREAL,\n\t"laps"\tINTEGER,\n\t"milliseconds"\tINTEGER,\n\t"fastestLap"\tINTEGER,\n\t"rank"\tINTEGER,\n\t"fastestLapTime"\tINTEGER,\n\t"fastestLapSpeed"\tREAL,\n\t"statusId"\tINTEGER,\n\tPRIMARY KEY("resultId"))',createIndices$3='CREATE INDEX "results_idx" ON "results" (\n\t"raceId"\n)',columnTypes$3=["number","number","number","number","number","number","number","string","number","number","number","number","number","number","number","number","number"],table$3={tablename:tablename$3,createTable:createTable$3,createIndices:createIndices$3,columnTypes:columnTypes$3},tablename$2="status",createTable$2='CREATE TABLE "status" (\n\t"statusId"\tINTEGER NOT NULL UNIQUE,\n\t"status"\tTEXT,\n\tPRIMARY KEY("statusId"))',createIndices$2="",columnTypes$2=["number","string"],table$2={tablename:tablename$2,createTable:createTable$2,createIndices:createIndices$2,columnTypes:columnTypes$2};async function getRaceResults(e,t){let n={$year:e,$round:t};return await this.checkDependencies(dependencies,n),getMany(this.db,stmt,n,mapFromSQL)}const dependencies=[table$7,table$4,table$5,table$6,table$3,table$2],mapFromSQL=e=>__spreadProps(__spreadValues({},e),{hasFastestLap:1==e.hasFastestLap,hasSlowestLap:1==e.hasSlowestLap}),stmt="select r.resultId, \n\tr.driverId, drivers.forename, drivers.surname,\n\tconstructors.name as team,\n\tconstructors_colours.colour as teamColour, \n\tstatus.status,\n\tr.grid, \n\tr.position,\n\tr.grid - r.position as positionsMoved,\n\tr.points,\n\tr.laps,\n\tr.fastestLap,\n\tr.fastestLapTime,\n\tcase when \n\t\tr.fastestLapTime = (select \n\t\t\tmin(results.fastestLapTime)\n\t\t\tfrom results \n\t\t\twhere results.raceId = r.raceId)\n\t\tthen 1\n\t\telse 0\n\t\tend as hasFastestLap,\n\tcase when \n\t\tr.fastestLapTime = (select \n\t\t\tmax(results.fastestLapTime)\n\t\t\tfrom results \n\t\t\twhere results.raceId = r.raceId\n\t\t\t\tand results.position > 0)\n\t\tthen 1\n\t\telse 0\n\t\tend as hasSlowestLap\n\tfrom results r\n\tjoin races on races.raceId = r.raceId\n\tjoin drivers on drivers.driverId = r.driverId\n\tjoin constructors on constructors.constructorId = r.constructorId\n\tjoin status on status.statusId = r.statusId\n\tleft join constructors_colours on constructors_colours.constructorColourId = (\n\t\tselect constructors_colours.constructorColourId\n\t\tfrom constructors_colours \n\t\twhere constructors_colours.constructorId = r.constructorId\n\t\tand constructors_colours.year >= $year\n\t\torder by constructors_colours.year asc\n\t\tlimit 1\n\t\t)\n\twhere races.year = $year and races.round = $round\n\torder by r.positionOrder";class DataStoreImpl{constructor(e,t,n,r){this.checkDependencies=checkDependencies,this.getCircuit=getCircuit,this.getDriverByName=getDriverByName,this.getJoinedRaces=getJoinedRaces,this.getRaceResults=getRaceResults,this.db=e,this.basedir=t,this.cachename=n,this.progress=r,this.fetchQueue=new Map}}const tablename$1="cachekeys_loaded",createTable$1='CREATE TABLE "cachekeys_loaded" (\n\t"cachekey"\tTEXT\n\t)',createIndices$1="",columnTypes$1=["string"],table$1={tablename:tablename$1,createTable:createTable$1,createIndices:createIndices$1,columnTypes:columnTypes$1},tablename="qualifying",createTable='CREATE TABLE "qualifying" (\n\t"qualifyId"\tINTEGER NOT NULL UNIQUE,\n\t"raceId"\tINTEGER,\n\t"driverId"\tINTEGER,\n\t"constructorId"\tINTEGER,\n\t"number"\tINTEGER,\n\t"position"\tINTEGER,\n\t"q1"\tINTEGER,\n\t"q2"\tINTEGER,\n\t"q3"\tINTEGER,\n\tPRIMARY KEY("qualifyId"))',createIndices="",columnTypes=["number","number","number","number","number","number","number","number","number"],table={tablename:tablename,createTable:createTable,createIndices:createIndices,columnTypes:columnTypes},cachename="f1-data",defaultSqlConfig={locateFile:e=>`https://cdn.jsdelivr.net/npm/sql.js@1.5.0/dist/${e}`},tables=[table$1,table$8,table$5,table$4,table$7,table,table$6,table$3,table$2];async function createStore(e,t,n){const r=tables.length+1;let a=await initSqlJs(n||defaultSqlConfig).then((e=>new e.Database)).then((e=>(t&&t({done:"database",max:r}),e)));for(let i of tables)await createTable$9(a,i,t);return await maintainCache(cachename,urljoin(e,"version.json")),new DataStoreImpl(a,e,cachename,t)}const worker=self;let workerDb=null;const serverStub=new ServerWorkerStub((e=>worker.postMessage(e)));async function initHandler(e,t){if(null==workerDb)return setWaitFor(0),createStore(e.baseURI+"data",t).then((e=>{workerDb=e}));throw"Database already initialised"}worker.onmessage=e=>serverStub.receive(e.data),serverStub.registerHandler("init",initHandler),serverStub.registerHandler("getCircuit",(async e=>workerDb.getCircuit(e.circuitId))),serverStub.registerHandler("getJoinedRaces",(async e=>workerDb.getJoinedRaces(e.year))),serverStub.registerHandler("getRaceResults",(async e=>workerDb.getRaceResults(e.year,e.round)));
