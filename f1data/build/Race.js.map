{"version":3,"file":"Race.js","sources":["../../src/components/Race.svelte","../../src/modules/queries/results.ts"],"sourcesContent":["<script lang=\"ts\">\r\n\timport type { JoinedRace, RaceResult } from \"+/modules/types\";\r\n\timport { storedDb as db } from \"+/stores/datastore\";\r\n\timport { getJoinedRaces } from \"+/modules/queries/races\";\r\n\timport { getResults } from \"+/modules/queries/results\";\r\n\timport { formatDate } from \"+/modules/shared\";\r\n\r\n\timport SectionTemplate from \"+/components/SectionTemplate.svelte\";\r\n\r\n\texport let params: { year: number, round: number };\r\n\r\n\tlet races: JoinedRace[], \r\n\t\trace: JoinedRace,\r\n\t\tresults: RaceResult[];\r\n\r\n\t$: if (params.year) races = getJoinedRaces($db, params.year);\r\n\t$: if (params.round && races) race = races.find(x => x.round == params.round);\r\n\t$: results = race ? getResults($db, race.raceId) : null;\r\n</script>\r\n\r\n<style type=\"text/scss\">\r\n\t.title {\r\n\t\tdisplay:flex;\r\n\t\twidth:100%;\r\n\r\n\t\t& :nth-child(1) {\r\n\t\t\tflex:auto;\r\n\t\t}\r\n\r\n\t\t& :nth-child(2) {\r\n\t\t\tflex:initial;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<SectionTemplate>\r\n\t<div class=\"title\" slot=\"header\">\r\n\t\t{#if race}\r\n\t\t\t<div>{race.year} {race.title}, Round {race.round}</div>\r\n\t\t\t<div>{formatDate(race?.when)}</div>\r\n\t\t{:else}\r\n\t\t\tNo race\r\n\t\t{/if}\r\n\t</div>\r\n\t\r\n\t{#if results?.length > 0}\r\n\t\t<table>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Driver</th>\r\n\t\t\t\t<th>Constructor</th>\r\n\t\t\t\t<th>Grid</th>\r\n\t\t\t\t<th>Position</th>\r\n\t\t\t\t<th>Laps</th>\r\n\t\t\t\t<th>Points</th>\r\n\t\t\t</tr>\r\n\t\t\t{#each results as result}\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{result.forename} {result.surname}</td>\r\n\t\t\t\t\t<td>{result.team}</td>\r\n\t\t\t\t\t<td>{result.grid}</td>\r\n\t\t\t\t\t<td>{result.position || result.status}</td>\r\n\t\t\t\t\t<td>{result.laps}</td>\r\n\t\t\t\t\t<td>{result.points}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t{/each}\r\n\t\t</table>\r\n\t{:else}\r\n\t\tNo results\r\n\t{/if}\r\n\r\n\t{#if races}\r\n\t\t<ul>\r\n\t\t\t{#each races as r}\r\n\t\t\t\t<li class:highlight={r.raceId == race?.raceId}>\r\n\t\t\t\t\t<a href=\"#/race/{r.year}/{r.round}\">{r.country}</a>\r\n\t\t\t\t</li>\r\n\t\t\t{/each}\r\n\t\t</ul>\r\n\t{/if}\r\n</SectionTemplate>\r\n",null],"names":["ctx","length","forename","surname","team","grid","position","status","laps","points","country","year","round","raceId","_ctx$","_ctx$2","title","formatDate","_ctx$4","when","_ctx$5","races","race","results","params","getJoinedRaces","$db","find","x","db","stmt","prepare","bind","$raceId","output","step","push","getAsObject","getResults"],"mappings":"s8BAuDUA,kBAALC,8YAAKD,aAALC,2HAAAA,sGAEKD,KAAOE,cAAWF,KAAOG,aACzBH,KAAOI,UACPJ,KAAOK,WACPL,KAAOM,UAAYN,KAAOO,aAC1BP,KAAOQ,UACPR,KAAOS,kYALPT,KAAOE,iCAAWF,KAAOG,gCACzBH,KAAOI,6BACPJ,KAAOK,8BACPL,KAAOM,UAAYN,KAAOO,gCAC1BP,KAAOQ,6BACPR,KAAOS,sEAUPT,kBAALC,0MAAKD,aAALC,2HAAAA,sEAEqCD,KAAEU,4FAAtBV,KAAEW,SAAOX,KAAEY,uBADRZ,KAAEa,mBAAUb,yBAAAc,EAAMD,4FACDb,KAAEU,0CAAtBV,KAAEW,SAAOX,KAAEY,4CADRZ,KAAEa,mBAAUb,yBAAAe,EAAMF,+FA5BrCb,2BAASC,QAAS,0BAyBlBD,2MAAAA,8QAhCGA,KAAKW,UAAOX,KAAKgB,WAAehB,KAAKY,WACrCK,YAAWjB,yBAAAkB,EAAMC,8RADjBnB,KAAKW,6BAAOX,KAAKgB,8BAAehB,KAAKY,8BACrCK,YAAWjB,yBAAAoB,EAAMD,sGAFnBnB,8qBA1BFqB,EACHC,EACAC,EAJUC,IAAAA,uGAMJA,EAAOb,UAAMU,EAAQI,EAAeC,EAAKF,EAAOb,qBAChDa,EAAOZ,OAASS,OAAOC,EAAOD,EAAMM,MAAK,SAAAC,UAAKA,EAAEhB,OAASY,EAAOZ,6BACpEW,EAAUD,WCbbO,EACAhB,GAEA,IAAIiB,EAAOD,EAAGE,QAAQ,2dAgBtBD,EAAKE,KAAK,CAAEC,QAASpB,IAErB,IAAIqB,EAA4B,GAEhC,KAAOJ,EAAKK,QACXD,EAAOE,KAAKN,EAAKO,eAGlB,OAAOH,EDdaI,CAAWZ,EAAKJ,EAAKT,QAAU"}