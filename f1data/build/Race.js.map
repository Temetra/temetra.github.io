{"version":3,"file":"Race.js","sources":["../../src/modules/queries/results.ts","../../src/components/Race.svelte"],"sourcesContent":[null,"<script lang=\"ts\">\r\n\timport type { JoinedRace, RaceResult } from \"+/modules/types\";\r\n\timport { storedDb as db } from \"+/stores/datastore\";\r\n\timport { getJoinedRaces } from \"+/modules/queries/races\";\r\n\timport { getResults } from \"+/modules/queries/results\";\r\n\timport { formatDate } from \"+/modules/shared\";\r\n\r\n\timport SectionTemplate from \"+/components/SectionTemplate.svelte\";\r\n\r\n\texport let params: { year: number, round: number };\r\n\r\n\tlet races: JoinedRace[], \r\n\t\trace: JoinedRace,\r\n\t\tresults: RaceResult[];\r\n\r\n\t$: if (params.year) races = getJoinedRaces($db, params.year);\r\n\t$: if (params.round && races) race = races.find(x => x.round == params.round);\r\n\t$: results = race ? getResults($db, race.raceId) : null;\r\n</script>\r\n\r\n<style type=\"text/scss\">\r\n\t.title {\r\n\t\tdisplay:flex;\r\n\t\twidth:100%;\r\n\r\n\t\t& :nth-child(1) {\r\n\t\t\tflex:auto;\r\n\t\t}\r\n\r\n\t\t& :nth-child(2) {\r\n\t\t\tflex:initial;\r\n\t\t}\r\n\t}\r\n</style>\r\n\r\n<SectionTemplate>\r\n\t<div class=\"title\" slot=\"header\">\r\n\t\t{#if race}\r\n\t\t\t<div>{race.year} {race.title}, Round {race.round}</div>\r\n\t\t\t<div>{formatDate(race?.when)}</div>\r\n\t\t{:else}\r\n\t\t\tNo race\r\n\t\t{/if}\r\n\t</div>\r\n\t\r\n\t{#if results?.length > 0}\r\n\t\t<table>\r\n\t\t\t<tr>\r\n\t\t\t\t<th>Driver</th>\r\n\t\t\t\t<th>Constructor</th>\r\n\t\t\t\t<th>Grid</th>\r\n\t\t\t\t<th>Position</th>\r\n\t\t\t\t<th>Laps</th>\r\n\t\t\t\t<th>Points</th>\r\n\t\t\t</tr>\r\n\t\t\t{#each results as result}\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>{result.forename} {result.surname}</td>\r\n\t\t\t\t\t<td>{result.team}</td>\r\n\t\t\t\t\t<td>{result.grid}</td>\r\n\t\t\t\t\t<td>{result.position || result.status}</td>\r\n\t\t\t\t\t<td>{result.laps}</td>\r\n\t\t\t\t\t<td>{result.points}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t{/each}\r\n\t\t</table>\r\n\t{:else}\r\n\t\tNo results\r\n\t{/if}\r\n\r\n\t{#if races}\r\n\t\t<ul>\r\n\t\t\t{#each races as r}\r\n\t\t\t\t<li class:highlight={r.raceId == race?.raceId}>\r\n\t\t\t\t\t<a href=\"#/race/{r.year}/{r.round}\">{r.country}</a>\r\n\t\t\t\t</li>\r\n\t\t\t{/each}\r\n\t\t</ul>\r\n\t{/if}\r\n</SectionTemplate>\r\n"],"names":[],"mappings":"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"}